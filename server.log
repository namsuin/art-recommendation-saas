ğŸ¨ Starting Art Recommendation SaaS Server...

ğŸ”§ Environment Configuration:

âš ï¸  WARNINGS:
  - Replicate API not configured (REPLICATE_API_TOKEN missing)

âœ… Basic configuration is valid

ğŸ“‹ Configured Services:
  - Supabase: âœ…
  - Google Vision: âœ…
  - Replicate: âš ï¸
  - Clarifai: âœ…
  - Stripe: âš ï¸


ğŸ‰ Art Recommendation SaaS Server Started!
ğŸŒ URL: http://localhost:3000
â¤ï¸  Health: http://localhost:3000/api/health
ğŸ”§ Status: Simplified version without AI generators
ğŸ“‹ Features: AI Analysis, Authentication, Static Serving
âš¡ Performance: Optimized and lightweight

[2025-08-08T13:12:40.736Z] GET /api/health
âœ… Supabase connection successful
ğŸš€ Initializing AI Analysis Service...
ğŸ”‘ Initializing Google Vision with key file: /Users/suin2/art-recommendation-saas/cedar-gift-467808-f9-993fe64d0376.json
ğŸ“‚ Project ID: cedar-gift-467808-f9
âœ… Google Vision AI initialized with service account
âš ï¸ Replicate API token not found
âœ… Clarifai API initialized
ğŸ”„ Initializing Local CLIP service...
ğŸ¯ AI Ensemble Service initialized
âœ… AI Ensemble Service initialized
ğŸ’Š Health check system initialized (30000ms interval)
ğŸ¨ WikiArt API initialized (disabled due to API restrictions)
ğŸ›ï¸ Harvard Art Museums API initialized
ğŸ›ï¸ Europeana API initialized (no API key - using demo mode)
ğŸ¨ All art source APIs initialized
[2025-08-08T13:13:02.173Z] GET /
[2025-08-08T13:14:52.035Z] GET /
[2025-08-08T13:15:07.679Z] POST /api/analyze
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ”„ Running 5 services in parallel: google_vision, replicate, clarifai, local_clip, style_transfer
âŒ Google Vision API error: {
  message: "ENOENT: no such file or directory, open '/Users/suin2/art-recommendation-saas/cedar-gift-467808-f9-993fe64d0376.json'",
  code: "ENOENT",
  details: undefined,
}
ğŸ¨ Extracted 3 colors from keywords: gray, black, white
ğŸ” Image analysis completed in 3580ms
ğŸ“ˆ Confidence boosted to 0.85
ğŸ’¾ Cached analysis result (1/500)
ğŸš€ Optimized analysis completed in 3582ms
ğŸ“Š Analysis complete. Found 23 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for balance, zen, water, lake, reflection...
ğŸ” Europeana: Searching for balance, zen, water, lake, reflection...
âœ… Harvard: Found 0 artworks
âœ… Europeana: Found 0 cultural items
ğŸ” Found 6 potential artworks
ğŸ¨ Got 2 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 2
ğŸ¯ First artwork: Clock watch with astronomical dial and sundial by Jan Jansen Bockeltz
âœ… Retrieved 2 Met Museum artworks
ğŸ›ï¸ Found 2 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 2 local artworks
ğŸ” Filtered 4 â†’ 4 valid recommendations
âœ… Returning 4 total recommendations from Met Museum, Local DB (Bluethumb filtered)
ğŸ”‘ Supabase admin client: initialized
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 7949ms
[2025-08-08T13:18:39.461Z] GET /
[2025-08-08T13:18:51.310Z] POST /api/analyze
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ”„ Running 5 services in parallel: google_vision, replicate, clarifai, local_clip, style_transfer
âŒ Google Vision API error: {
  message: "ENOENT: no such file or directory, open '/Users/suin2/art-recommendation-saas/cedar-gift-467808-f9-993fe64d0376.json'",
  code: "ENOENT",
  details: undefined,
}
ğŸ¨ Extracted 2 colors from keywords: white, yellow
ğŸ” Image analysis completed in 2814ms
ğŸ“ˆ Confidence boosted to 0.85
ğŸ’¾ Cached analysis result (2/500)
ğŸš€ Optimized analysis completed in 2814ms
ğŸ“Š Analysis complete. Found 22 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: landscape, grass, golf, nature, countryside, sky, rural, soil, field, cloud, sun, country, tree, summer, pasture, lawn, fair weather, farmland, cloudy, hayfield, white, yellow
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: landscape, grass, golf, nature, countryside, sky, rural, soil, field, cloud, sun, country, tree, summer, pasture, lawn, fair weather, farmland, cloudy, hayfield, white, yellow
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for landscape, grass, golf, nature, countryside...
ğŸ” Europeana: Searching for landscape, grass, golf, nature, countryside...
âœ… Harvard: Found 0 artworks
âœ… Europeana: Found 0 cultural items
ğŸ” Found 5 potential artworks
ğŸ¨ Got 3 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 3
ğŸ¯ First artwork: The Penitence of Saint Jerome by Joachim Patinir
âœ… Retrieved 3 Met Museum artworks
ğŸ›ï¸ Found 3 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 3 local artworks
âš ï¸ Invalid image URL: https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/The_Persistence_of_Memory.jpg/1280px-The_Persistence_of_Memory.jpg (Status: 404)
âŒ Excluding artwork with invalid image: The Persistence of Memory
ğŸ” Filtered 6 â†’ 5 valid recommendations
âœ… Returning 5 total recommendations from Met Museum, Local DB (Bluethumb filtered)
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 8203ms
[2025-08-08T13:19:12.184Z] POST /api/multi-analyze
ğŸ” Analyzing 2 images for user: d443a229-d7de-4840-a621-d82e9ad30619
ğŸ“¸ Processing image 1/2: free-nature-images.jpg
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ“‹ Cache hit for image analysis
ğŸ“Š Analysis complete. Found 22 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: landscape, grass, golf, nature, countryside, sky, rural, soil, field, cloud, sun, country, tree, summer, pasture, lawn, fair weather, farmland, cloudy, hayfield, white, yellow
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: landscape, grass, golf, nature, countryside, sky, rural, soil, field, cloud, sun, country, tree, summer, pasture, lawn, fair weather, farmland, cloudy, hayfield, white, yellow
ğŸ” Found 0 potential artworks
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for landscape, grass, golf, nature, countryside...
ğŸ” Europeana: Searching for landscape, grass, golf, nature, countryside...
ğŸ¨ Got 0 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 0
âœ… Retrieved 0 Met Museum artworks
âœ… Harvard: Found 0 artworks
âœ… Europeana: Found 0 cultural items
ğŸ›ï¸ Found 0 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 0 local artworks
ğŸ” Filtered 0 â†’ 0 valid recommendations
No matches found, using fallback recommendations
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 190ms
ğŸ“¸ Processing image 2/2: Free-Stock-Photos-01.jpg
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ“‹ Cache hit for image analysis
ğŸ“Š Analysis complete. Found 23 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Found 0 potential artworks
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for balance, zen, water, lake, reflection...
ğŸ” Europeana: Searching for balance, zen, water, lake, reflection...
ğŸ¨ Got 0 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 0
âœ… Retrieved 0 Met Museum artworks
âœ… Harvard: Found 0 artworks
âœ… Europeana: Found 0 cultural items
ğŸ›ï¸ Found 0 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 0 local artworks
ğŸ” Filtered 0 â†’ 0 valid recommendations
No matches found, using fallback recommendations
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 160ms
Failed to get recommendations: 268 |         // Get recommendations based on common patterns
269 |         let recommendations = [];
270 |         if (commonKeywords.length >= 3) {
271 |           try {
272 |             const searchQuery = commonKeywords.slice(0, 5).join(' ');
273 |             const recommendResult = await getAIService().getRecommendations(searchQuery);
                                                               ^
TypeError: getAIService().getRecommendations is not a function. (In 'getAIService().getRecommendations(searchQuery)', 'getAIService().getRecommendations' is undefined)
      at fetch (/Users/suin2/art-recommendation-saas/server.ts:273:58)

[2025-08-08T13:27:39.115Z] GET /
[2025-08-08T13:27:40.634Z] GET /
[2025-08-08T13:27:52.092Z] POST /api/multi-analyze
ğŸ” Analyzing 1 images for user: d443a229-d7de-4840-a621-d82e9ad30619
ğŸ“¸ Processing image 1/1: Free-Stock-Photos-01.jpg
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ“‹ Cache hit for image analysis
ğŸ“Š Analysis complete. Found 23 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Found 0 potential artworks
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for balance, zen, water, lake, reflection...
ğŸ’¾ Harvard: Using cached results (0 items)
ğŸ” Europeana: Searching for balance, zen, water, lake, reflection...
ğŸ’¾ Europeana: Using cached results (0 items)
ğŸ¨ Got 0 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 0
âœ… Retrieved 0 Met Museum artworks
ğŸ›ï¸ Found 0 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 0 local artworks
ğŸ” Filtered 0 â†’ 0 valid recommendations
No matches found, using fallback recommendations
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 794ms
Failed to get recommendations: 268 |         // Get recommendations based on common patterns
269 |         let recommendations = [];
270 |         if (commonKeywords.length >= 3) {
271 |           try {
272 |             const searchQuery = commonKeywords.slice(0, 5).join(' ');
273 |             const recommendResult = await getAIService().getRecommendations(searchQuery);
                                                               ^
TypeError: getAIService().getRecommendations is not a function. (In 'getAIService().getRecommendations(searchQuery)', 'getAIService().getRecommendations' is undefined)
      at fetch (/Users/suin2/art-recommendation-saas/server.ts:273:58)

[2025-08-08T13:28:03.240Z] POST /api/analyze
ğŸ” Starting optimized image analysis...
ğŸ”§ AI Ensemble status: initialized
ğŸ”§ Performance Optimizer status: initialized
ğŸ“‹ Cache hit for image analysis
ğŸ“Š Analysis complete. Found 23 keywords
ğŸ¯ Style: mixed, Confidence: 0.85
ğŸ” Using keyword-based search fallback...
ğŸ” Searching for artworks with keywords: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Searching multiple art sources in parallel...
ğŸ›ï¸ Searching Met Museum for: balance, zen, water, lake, reflection, harmony, meditation, nature, rock, river, outdoors, no person, peace, composure, pool, stability, boulder, fall, relaxation, park, gray, black, white
ğŸ” Found 6 potential artworks
ğŸ” WikiArt: Service disabled due to API restrictions
ğŸ” Harvard: Searching for balance, zen, water, lake, reflection...
ğŸ’¾ Harvard: Using cached results (0 items)
ğŸ” Europeana: Searching for balance, zen, water, lake, reflection...
ğŸ’¾ Europeana: Using cached results (0 items)
ğŸ¨ Got 2 artworks from getArtworkDetails
ğŸ“Š Ranked artworks: 2
ğŸ¯ First artwork: Clock watch with astronomical dial and sundial by Jan Jansen Bockeltz
âœ… Retrieved 2 Met Museum artworks
ğŸ›ï¸ Found 2 Met Museum artworks
ğŸ¨ Found 0 WikiArt artworks
ğŸ“ Found 0 Harvard artworks
ğŸ‡ªğŸ‡º Found 0 Europeana items
ğŸ“š Found 2 local artworks
ğŸ” Filtered 4 â†’ 4 valid recommendations
âœ… Returning 4 total recommendations from Met Museum, Local DB (Bluethumb filtered)
âœ… User upload stored successfully via admin client
âœ… Analysis and recommendation complete in 1680ms
