<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>새 작품 등록 - Art Recommendation SaaS</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen">
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-xl font-bold text-gray-800">Art Recommendation SaaS</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/dashboard" class="text-gray-700 hover:text-blue-600">대시보드로 돌아가기</a>
                </div>
            </div>
        </div>
    </nav>
    
    <div id="root" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-2xl font-bold mb-6">새 작품 등록</h2>
            <form id="artworkForm">
                <!-- 기본 정보 -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">작품명 *</label>
                        <input type="text" name="title" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">작가명 *</label>
                        <input type="text" name="artist" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <!-- 작가 소개 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">작가 소개</label>
                    <textarea name="artist_introduction" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" 
                              placeholder="작가의 경력, 스타일, 철학 등을 간단히 소개해주세요"></textarea>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">작품 설명</label>
                    <textarea name="description" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                </div>

                <!-- 작품 링크 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        🔗 작품 상세 링크 (선택사항)
                    </label>
                    <input type="url" name="link" placeholder="https://example.com/artwork-detail" 
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <p class="mt-1 text-sm text-gray-500">
                        작품의 상세 정보를 볼 수 있는 링크를 입력하세요. 이미지 분석 후 추천 작품 클릭 시 이 링크로 이동합니다.
                    </p>
                </div>

                <!-- 상세 정보 -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">카테고리</label>
                        <select name="category" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">선택하세요</option>
                            <option value="회화">회화</option>
                            <option value="조각">조각</option>
                            <option value="사진">사진</option>
                            <option value="디지털아트">디지털아트</option>
                            <option value="판화">판화</option>
                            <option value="드로잉">드로잉</option>
                            <option value="설치미술">설치미술</option>
                            <option value="영상미술">영상미술</option>
                            <option value="공예">공예</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">매체</label>
                        <select name="medium" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">선택하세요</option>
                            <option value="유화">유화</option>
                            <option value="수채화">수채화</option>
                            <option value="아크릴">아크릴</option>
                            <option value="과슈">과슈</option>
                            <option value="파스텔">파스텔</option>
                            <option value="연필">연필</option>
                            <option value="펜">펜</option>
                            <option value="목탄">목탄</option>
                            <option value="청동">청동</option>
                            <option value="대리석">대리석</option>
                            <option value="석고">석고</option>
                            <option value="나무">나무</option>
                            <option value="금속">금속</option>
                            <option value="디지털">디지털</option>
                            <option value="혼합매체">혼합매체</option>
                            <option value="기타">기타</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">제작년도</label>
                        <input type="number" name="year" min="1000" max="2100" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">가격 (원)</label>
                        <input type="number" name="price" min="0" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <!-- 작품 크기 -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">가로 (cm)</label>
                        <input type="number" name="width" min="0" step="0.1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">세로 (cm)</label>
                        <input type="number" name="height" min="0" step="0.1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">깊이 (cm)</label>
                        <input type="number" name="depth" min="0" step="0.1" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                </div>

                <!-- 이미지 URL 또는 업로드 -->
                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">작품 이미지</label>
                    
                    <!-- 이미지 URL 입력 -->
                    <div class="mb-4">
                        <label class="block text-xs text-gray-600 mb-1">이미지 URL 입력</label>
                        <input type="url" name="image_url" id="imageUrl" placeholder="https://example.com/artwork-image.jpg" 
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="text-center text-gray-500 my-2">또는</div>
                    
                    <!-- 이미지 파일 업로드 -->
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                        <input type="file" id="imageFile" name="image" accept="image/*" class="hidden">
                        <label for="imageFile" class="cursor-pointer">
                            <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                            </svg>
                            <p class="mt-2 text-sm text-gray-600">클릭하여 이미지를 선택하거나 드래그 앤 드롭</p>
                        </label>
                        <div id="imagePreview" class="mt-4"></div>
                    </div>
                </div>

                <!-- 판매 여부 -->
                <div class="mb-6">
                    <label class="flex items-center">
                        <input type="checkbox" name="is_for_sale" class="mr-2">
                        <span class="text-sm font-medium text-gray-700">판매 가능 작품입니다</span>
                    </label>
                </div>

                <!-- 버튼 -->
                <div class="flex justify-end space-x-4">
                    <button type="button" onclick="window.location.href='/dashboard'" class="px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                        취소
                    </button>
                    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        작품 등록
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // 이미지 URL 미리보기
        document.getElementById('imageUrl').addEventListener('input', function(e) {
            const url = e.target.value;
            if (url) {
                document.getElementById('imagePreview').innerHTML = 
                    '<img src="' + url + '" class="max-h-40 mx-auto" onerror="this.style.display=\'none\'">';
            }
        });

        // 이미지 파일 미리보기
        document.getElementById('imageFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').innerHTML = 
                        '<img src="' + e.target.result + '" class="max-h-40 mx-auto">';
                };
                reader.readAsDataURL(file);
            }
        });

        // 폼 제출
        document.getElementById('artworkForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const imageFile = document.getElementById('imageFile').files[0];
            const imageUrl = document.getElementById('imageUrl').value;
            
            if (!imageFile && !imageUrl) {
                alert('이미지 URL을 입력하거나 이미지 파일을 선택해주세요.');
                return;
            }
            
            // 여기에 API 호출 코드 추가
            const artworkData = {
                title: formData.get('title'),
                artist: formData.get('artist'),
                artist_introduction: formData.get('artist_introduction'),
                description: formData.get('description'),
                link: formData.get('link'),
                category: formData.get('category'),
                medium: formData.get('medium'),
                year: formData.get('year'),
                price: formData.get('price'),
                width: formData.get('width'),
                height: formData.get('height'),
                depth: formData.get('depth'),
                image_url: imageUrl,
                image_file: imageFile,
                is_for_sale: formData.get('is_for_sale') ? true : false
            };
            
            console.log('작품 등록 데이터:', artworkData);
            
            // API 호출 (추후 구현)
            try {
                // const response = await fetch('/api/artwork/register', {
                //     method: 'POST',
                //     body: formData
                // });
                
                alert('작품이 등록되었습니다!');
                window.location.href = '/dashboard';
            } catch (error) {
                console.error('등록 실패:', error);
                alert('작품 등록에 실패했습니다.');
            }
        });
    </script>
</body>
</html>