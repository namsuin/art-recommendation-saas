
🔧 Environment Configuration:

⚠️  WARNINGS:
  - Replicate API not configured (REPLICATE_API_TOKEN missing)
  - Clarifai API not configured (CLARIFAI_API_KEY missing)

✅ Basic configuration is valid

📋 Configured Services:
  - Supabase: ✅
  - Google Vision: ✅
  - Replicate: ⚠️
  - Clarifai: ⚠️
  - Stripe: ⚠️

🚀 AI Art Recommendation Server running at http://localhost:3000
🎨 Frontend: http://localhost:3000
❤️  Health check: http://localhost:3000/api/health
🔐 Authentication: Login/Signup available
✅ Supabase connection successful
🚀 Initializing AI Analysis Service...
🔑 Initializing Google Vision with key file: /Users/suin2/art-recommendation-saas/cedar-gift-467808-f9-993fe64d0376.json
📂 Project ID: cedar-gift-467808-f9
✅ Google Vision AI initialized with service account
⚠️ Replicate API token not found
⚠️ Clarifai API key not found
🔄 Initializing Local CLIP service...
🎯 AI Ensemble Service initialized
✅ AI Ensemble Service initialized
💊 Health check system initialized (30000ms interval)
Request body text: {
    "userId": "json-test-user",
    "content": "JSON 파싱 테스트입니다\! 특수문자: @#$%^&*()[]{}",
    "image_url": "https://via.placeholder.com/600x400?text=JSON+Test"
  }
Initial JSON parse failed: 1455 |           console.log('Request body text:', text);
1456 | 
1457 |           // JSON 파싱 시도
1458 |           let body;
1459 |           try {
1460 |             body = JSON.parse(text);
                               ^
SyntaxError: JSON Parse error: Invalid escape character !
      at fetch (/Users/suin2/art-recommendation-saas/backend/simple-server.ts:1460:25)

JSON parsing succeeded after cleaning
Failed to create post: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Request body text: {
    "userId": "emoji-test-user", 
    "content": "이모지 테스트 🎨✨🖼️ 느낌표도 있어요\!",
    "image_url": "https://via.placeholder.com/600x400?text=Emoji+Test"
  }
Initial JSON parse failed: 1455 |           console.log('Request body text:', text);
1456 | 
1457 |           // JSON 파싱 시도
1458 |           let body;
1459 |           try {
1460 |             body = JSON.parse(text);
                               ^
SyntaxError: JSON Parse error: Invalid escape character !
      at fetch (/Users/suin2/art-recommendation-saas/backend/simple-server.ts:1460:25)

JSON parsing succeeded after cleaning
Failed to create post: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Failed to get feed posts: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Failed to get feed posts: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Failed to get feed posts: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Failed to get feed posts: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
Request body text: {"userId":"migration-test-user","content":"마이그레이션 완료 테스트 포스트!"}
Failed to create post: {
  code: "PGRST200",
  details: "Searched for a foreign key relationship between 'community_posts' and 'users' in the schema 'public', but no matches were found.",
  hint: "Perhaps you meant 'recommendations' instead of 'community_posts'.",
  message: "Could not find a relationship between 'community_posts' and 'users' in the schema cache",
}
